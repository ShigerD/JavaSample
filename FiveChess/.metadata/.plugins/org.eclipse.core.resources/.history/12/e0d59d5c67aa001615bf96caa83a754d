package Day4;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;

import javax.swing.*;

public class FiveChessFrame extends JFrame //çª—å£ä¸­éœ€è¦çš„ç»„ä»¶ï¼Œä½œä¸ºå±æ€§å‡ºç?
{
	private Judgment judgment;
	
	private int lineLength=300; //æ£‹ç›˜çº¿æ¡çš„é•¿åº?
	private int lineStart=50;   //æ£‹ç›˜çº¿æ¡çš„èµ·å§‹ä½ç½?
	//private JButton bt;
	public FiveChessFrame(String title)
	{
		super(title);
		judgment =new Judgment(lineStart,lineStart+lineLength);
		initFrame();
		//initComponent();
		
		this.setVisible(true); //è®¾ç½®çœ‹è§	
		
		addListener();
		
		paint(this.getGraphics());
	}
	
	int x,y;
	boolean isBlack=true;
	public void addListener()
	{
		this.addMouseListener(
				/*åŒ¿åå†…éƒ¨ç±?*/
				new MouseAdapter()
				{
					public void mouseClicked(MouseEvent e) //çª—å£å‡ºç°é¼ æ ‡ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œæƒ³è®©å®ƒå¹²ä»?ä¹?
					{
						if(e.getButton()!=MouseEvent.BUTTON1) //è‹¥æŒ‰ä¸‹çš„ä¸æ˜¯å·¦é”®
							return;
						//æ‰¾åˆ°é¼ æ ‡çš„ä½ç½?
						 x=e.getX();
						 y=e.getY();
						 //ä¿®æ­£x,y
						 int lineEnd=lineStart+lineLength;
						 if(!((x>=lineStart && x<=lineEnd) && (y>=lineStart && y<=lineEnd)))
							 return;
						 int i=(x-lineStart)/Chess.getSize(); //æ•´é™¤å¾—åˆ°æ£‹å­åœ¨ç¬¬å‡ ä¸ªè¡?
						 x=i*Chess.getSize()+lineStart; //å¾—åˆ°ç¬¬å‡ ä¸ªè¡Œçš„å·¦ä¸Šè§’xåæ ‡
						 
						 i=(y-lineStart)/Chess.getSize(); //æ•´é™¤å¾—åˆ°æ£‹å­åœ¨ç¬¬å‡ ä¸ªåˆ?
						 y=i*Chess.getSize()+lineStart; //å¾—åˆ°ç¬¬å‡ ä¸ªåˆ—çš„å·¦ä¸Šè§’yåæ ‡
						 
						 //æ ¹æ®isBlackçš„å?¼è®¾ç½®æ£‹å­çš„é¢œè‰²
						 Color col=isBlack==true?Color.black:Color.white;
						 Chess c=new Chess(x,y,col); //åˆå§‹åŒ–æœ‰é¢œè‰²çš„æ£‹å­?
						 
						 //Chess c=new Chess(x,y);
						 judgment.add(c); //å°†æ£‹å­åŠ å…¥Judgmentçš„æ£‹å­é›†åˆä¸­
						 
						 isBlack=!isBlack;
						 //åœ¨ä½ç½®ä¸Šç”»åœ†ï¼Œåœ¨paintæ–¹æ³•ä¸­ï¼Œrepaintæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨paint
						 repaint();
					}
				}
				);
		
	}
	
	public void initFrame()
	{
		int width=400;
		int height=400;
		int x=0,y=0;
		Toolkit tk=Toolkit.getDefaultToolkit(); //è·å¾—ç³»ç»Ÿå·¥å…·åŒ?
		Dimension d=tk.getScreenSize(); //è·å¾—å±å¹•å°ºå¯¸
		// d.width  d.height //å±å¹•çš„å®½å’Œé«˜
		x=(d.width-width)/2;
		y=(d.height-height)/2;
		this.setBounds(x,y,width,height);
		//è®¾ç½®ç‚¹å‡»çª—å£å…³é—­æŒ‰é’®æ—¶çš„æ“ä½œä¸ºç»“æŸæ•´ä¸ªåº”ç”¨ç¨‹åº?
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		this.setLayout(null);
	}
	public void initComponent()
	{
		JButton bt=new JButton("Button");
		bt.setBounds(50,50,80,30);
		this.add(bt);
	}
	
	//é‡ç»˜æ–¹æ³•ï¼Œå½“çª—å£æ›å…‰æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³?
	public void paint(Graphics g)
	{
		g.clearRect(0,0,this.getWidth(),this.getHeight());
		//g.drawLine(20,100,20,200);
		//g.drawOval(x,y,30,30);
		//g.fillOval(x,y,30,30);
		
		//é¦–å…ˆåˆ¤æ–­é¼ æ ‡æ˜¯å¦è¶…å‡ºæ£‹ç›˜èŒƒå›´
		int lineEnd=lineStart+lineLength;
		int chessSize=Chess.getSize();
		for(int i=lineStart;i<=lineEnd;i+=chessSize)
		{
			g.drawLine(lineStart,i,lineEnd,i);
			g.drawLine(i,lineStart,i,lineEnd);
		}
		
		Color old=g.getColor(); //ä¿å­˜åŸæœ‰è®¾å¤‡é¢œè‰²
		ArrayList<Chess> list=judgment.getList();
		
		for(int i=0;i<list.size();i++)
		{
			Chess c=list.get(i);
			g.setColor(c.getCol()); //æ ¹æ®æ£‹å­é¢œè‰²è®¾ç½®ç”»ç¬”é¢œè‰²
			g.fillOval(c.getX(),c.getY(),30,30);
			g.setColor(Color.black); //ç”»é»‘è‰²è¾¹æ¡?
			g.drawArc(c.getX(),c.getY(),30,30,0,360);
		}
		g.setColor(old); //è¿˜åŸè®¾å¤‡é¢œè‰²
	}
	
	public static void main(String[] args)
	{
		new FiveChessFrame("äº”å­æ£‹çª—å?");
	}

}
